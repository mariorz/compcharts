shadow$provide.module$node_modules$$compound_finance$compound_js$dist$nodejs$comp=function(global,require,module,exports){function toChecksumAddress(_address){for(var chars=_address.toLowerCase().substring(2).split(""),expanded=new Uint8Array(40),i=0;40>i;i++)expanded[i]=chars[i].charCodeAt(0);chars=keccak256(expanded);expanded="";for(i=0;i<_address.length;i++)expanded=8<=parseInt(chars[i],16)?expanded+_address[i].toUpperCase():expanded+_address[i];return expanded}var __assign=this&&this.__assign||
function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t};return __assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new (P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}
function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||
((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=0<t.length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3]))_.label=op[1];else if(6===op[0]&&_.label<t[1])_.label=t[1],t=op;else if(t&&_.label<t[2])_.label=
t[2],_.ops.push(op);else{t[2]&&_.ops.pop();_.trys.pop();continue}}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},"function"===typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g};exports.__esModule=!0;exports.createDelegateSignature=exports.delegateBySig=exports.delegate=
exports.claimComp=exports.getCompAccrued=exports.getCompBalance=void 0;global=require("module$node_modules$ethers$dist$ethers_umd");var eth=require("module$node_modules$$compound_finance$compound_js$dist$nodejs$eth"),helpers_1=require("module$node_modules$$compound_finance$compound_js$dist$nodejs$helpers"),constants_1=require("module$node_modules$$compound_finance$compound_js$dist$nodejs$constants"),EIP712_1=require("module$node_modules$$compound_finance$compound_js$dist$nodejs$EIP712"),keccak256=
global.ethers.utils.keccak256;exports.getCompBalance=function(_address,_provider){void 0===_provider&&(_provider="mainnet");return __awaiter(this,void 0,void 0,function(){var provider,net,compAddress,parameters,trxOptions,result;return __generator(this,function(_a){switch(_a.label){case 0:return[4,eth._createProvider({provider:_provider})];case 1:return provider=_a.sent(),[4,eth.getProviderNetwork(provider)];case 2:net=_a.sent();if("string"!==typeof _address)throw Error("Compound [getCompBalance] | Argument `_address` must be a string.");
try{_address=toChecksumAddress(_address)}catch(e){throw Error("Compound [getCompBalance] | Argument `_address` must be a valid Ethereum address.");}compAddress=constants_1.address[net.name].COMP;parameters=[_address];trxOptions={_compoundProvider:provider,abi:constants_1.abi.COMP};return[4,eth.read(compAddress,"balanceOf",parameters,trxOptions)];case 3:return result=_a.sent(),[2,result.toString()]}})})};exports.getCompAccrued=function(_address,_provider){void 0===_provider&&(_provider="mainnet");
return __awaiter(this,void 0,void 0,function(){var provider,net,lensAddress,compAddress,comptrollerAddress,parameters,trxOptions,result;return __generator(this,function(_a){switch(_a.label){case 0:return[4,eth._createProvider({provider:_provider})];case 1:return provider=_a.sent(),[4,eth.getProviderNetwork(provider)];case 2:net=_a.sent();if("string"!==typeof _address)throw Error("Compound [getCompAccrued] | Argument `_address` must be a string.");try{_address=toChecksumAddress(_address)}catch(e){throw Error("Compound [getCompAccrued] | Argument `_address` must be a valid Ethereum address.");
}lensAddress=constants_1.address[net.name].CompoundLens;compAddress=constants_1.address[net.name].COMP;comptrollerAddress=constants_1.address[net.name].Comptroller;parameters=[compAddress,comptrollerAddress,_address];trxOptions={_compoundProvider:provider,abi:constants_1.abi.CompoundLens};return[4,eth.read(lensAddress,"getCompBalanceMetadataExt",parameters,trxOptions)];case 3:return result=_a.sent(),[2,result.allocated.toString()]}})})};exports.claimComp=function(options){void 0===options&&(options=
{});return __awaiter(this,void 0,void 0,function(){var userAddress,comptrollerAddress,trxOptions,parameters,e_1;return __generator(this,function(_a){switch(_a.label){case 0:return[4,helpers_1.netId(this)];case 1:_a.sent(),_a.label=2;case 2:return _a.trys.push([2,5,,6]),(userAddress=this._provider.address)||!this._provider.getAddress?[3,4]:[4,this._provider.getAddress()];case 3:userAddress=_a.sent(),_a.label=4;case 4:return comptrollerAddress=constants_1.address[this._network.name].Comptroller,trxOptions=
__assign(__assign({},options),{_compoundProvider:this._provider,abi:constants_1.abi.Comptroller}),parameters=[userAddress],[2,eth.trx(comptrollerAddress,"claimComp(address)",parameters,trxOptions)];case 5:return e_1=_a.sent(),e_1.message="Compound [claimComp] | "+e_1.message,[2,e_1];case 6:return[2]}})})};exports.delegate=function(_address,options){void 0===options&&(options={});return __awaiter(this,void 0,void 0,function(){var compAddress,trxOptions,parameters;return __generator(this,function(_a){switch(_a.label){case 0:return[4,
helpers_1.netId(this)];case 1:_a.sent();if("string"!==typeof _address)throw Error("Compound [delegate] | Argument `_address` must be a string.");try{_address=toChecksumAddress(_address)}catch(e){throw Error("Compound [delegate] | Argument `_address` must be a valid Ethereum address.");}compAddress=constants_1.address[this._network.name].COMP;trxOptions=__assign(__assign({},options),{_compoundProvider:this._provider,abi:constants_1.abi.COMP});parameters=[_address];return[2,eth.trx(compAddress,"delegate(address)",
parameters,trxOptions)]}})})};exports.delegateBySig=function(_address,nonce,expiry,signature,options){void 0===signature&&(signature={v:"",r:"",s:""});void 0===options&&(options={});return __awaiter(this,void 0,void 0,function(){var compAddress,trxOptions,v,r,s,parameters;return __generator(this,function(_a){switch(_a.label){case 0:return[4,helpers_1.netId(this)];case 1:_a.sent();if("string"!==typeof _address)throw Error("Compound [delegateBySig] | Argument `_address` must be a string.");try{_address=
toChecksumAddress(_address)}catch(e){throw Error("Compound [delegateBySig] | Argument `_address` must be a valid Ethereum address.");}if("number"!==typeof nonce)throw Error("Compound [delegateBySig] | Argument `nonce` must be an integer.");if("number"!==typeof expiry)throw Error("Compound [delegateBySig] | Argument `expiry` must be an integer.");if(!(Object.isExtensible(signature)&&signature.v&&signature.r&&signature.s))throw Error("Compound [delegateBySig] | Argument `signature` must be an object that contains the v, r, and s pieces of an EIP-712 signature.");
compAddress=constants_1.address[this._network.name].COMP;trxOptions=__assign(__assign({},options),{_compoundProvider:this._provider,abi:constants_1.abi.COMP});v=signature.v;r=signature.r;s=signature.s;parameters=[_address,nonce,expiry,v,r,s];return[2,eth.trx(compAddress,"delegateBySig",parameters,trxOptions)]}})})};exports.createDelegateSignature=function(delegatee,expiry){void 0===expiry&&(expiry=1E10);return __awaiter(this,void 0,void 0,function(){var provider,compAddress,chainId,userAddress,originalProvider,
nonce,domain,message,types,signer,signature;return __generator(this,function(_a){switch(_a.label){case 0:return[4,helpers_1.netId(this)];case 1:return _a.sent(),provider=this._provider,compAddress=constants_1.address[this._network.name].COMP,chainId=this._network.id,(userAddress=this._provider.address)||!this._provider.getAddress?[3,3]:[4,this._provider.getAddress()];case 2:userAddress=_a.sent(),_a.label=3;case 3:return originalProvider=this._originalProvider,[4,eth.read(compAddress,"function nonces(address) returns (uint)",
[userAddress],{provider:originalProvider})];case 4:return nonce=+_a.sent().toString(),domain={name:"Compound",chainId:chainId,verifyingContract:compAddress},message={delegatee:delegatee,nonce:nonce,expiry:expiry},types={EIP712Domain:[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Delegation:[{name:"delegatee",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"}]},signer=provider.getSigner?provider.getSigner():provider,
[4,EIP712_1.sign(domain,"Delegation",message,types,signer)];case 5:return signature=_a.sent(),[2,signature]}})})}}
//# sourceMappingURL=module$node_modules$$compound_finance$compound_js$dist$nodejs$comp.js.map
